* Test Scope

 * ~:src~
 * ~:lines~
 * ~:rest~
 * ~:omit-first-line~

* Tests

** Complete file
-----
#+begin_src emacs-lisp
  (defun test ()
    (message "line 2")
    (message "line 3")
    (let ((indentation "line 4"))
      (message "line 5")
      (message "line 6"))
    (message "line 7")
    (message "line 8"))
#+end_src
-----

** With ~:rest~
-----
#+begin_src emacs-lisp :results silent
  (defun test ()
    (message "line 2")
    (message "line 3")
    (let ((indentation "line 4"))
      (message "line 5")
      (message "line 6"))
    (message "line 7")
    (message "line 8"))
#+end_src
-----

** With ~:lines~
FIXME: Indentation with ~:lines~ is broken.

 * ~:lines -3~
-----
#+begin_src emacs-lisp
  (defun test ()
    (message "line 2")
    (message "line 3")
#+end_src
-----
 * ~:lines 2-5~
-----
#+begin_src emacs-lisp
    (message "line 2")
    (message "line 3")
    (let ((indentation "line 4"))
      (message "line 5")
#+end_src
-----
 * ~:lines 4-~
-----
#+begin_src emacs-lisp
    (let ((indentation "line 4"))
      (message "line 5")
      (message "line 6"))
    (message "line 7")
    (message "line 8"))
#+end_src
-----
 * ~:lines 5-~
 #+begin_src emacs-lisp
       (message "line 5")
       (message "line 6"))
     (message "line 7")
     (message "line 8"))
 #+end_src

** Begin and end marker

 * begin marker
-----
#+begin_src emacs-lisp
  ;; begin id-123
  (message "line 1")
  (message "line 2")
  (message "line 3")
  (message "line 4")
  ;; end id-123
  (message "---")
  (message "---")
#+end_src
-----
 * end marker
-----
#+begin_src emacs-lisp
  (defun test ()
    (message "---")
    ;; begin id-123
    (message "line 1")
    (message "line 2")
    (message "line 3")
    (message "line 4")
#+end_src
-----
 * begin/end marker
-----
#+begin_src emacs-lisp
  ;; begin id-123
  (message "line 1")
  (message "line 2")
  (message "line 3")
  (message "line 4")
#+end_src
-----
 * begin/end marker, ~:lines~
 #+begin_src emacs-lisp
   (message "line 2")
   (message "line 3")
   (message "line 4")
 #+end_src
-----

